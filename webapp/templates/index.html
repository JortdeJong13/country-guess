<!doctype html>
<html lang="en">
    <head>
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="{{ url_for('static', filename='favicon-32x32.png') }}"
        />
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="{{ url_for('static', filename='favicon-180x180.png') }}"
        />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Draw Country</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
    </head>

    </head>
    <body
        class="min-h-screen main-body relative m-0 p-0 font-sans text-center"
    >
        <div id="shake-screen" class="shake-wrapper">
            <!-- Title Container -->
            <div class="relative flex items-center justify-center px-10 mt-4">
                <!-- Title -->
                <h1
                    id="title-text"
                    class="title text-3xl sm:text-4xl font-bold cursor-pointer select-none"
                >
                    Draw a Country
                </h1>

                <!-- Separate Globe Emoji -->
                <span
                    id="globe-emoji"
                    class="text-4xl sm:text-4xl cursor-pointer select-none ml-2"
                    >üåç</span
                >

                <!-- GitHub Link -->
                <a
                    href="https://github.com/JortdeJong13/country-guess"
                    class="flex absolute right-10 github-link no-underline items-center z-10"
                    target="_blank"
                >
                    <span class="hidden md:inline">source</span>
                    <svg
                        class="w-5 h-5 ml-2 sm:block hidden"
                        viewBox="0 0 16 16"
                        fill="currentColor"
                        aria-hidden="true"
                    >
                        <path
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"
                        ></path>
                    </svg>
                </a>
            </div>

            <!-- Daily Challenge Pill -->
            <div id="daily-challenge-pill" class="daily-challenge-pill">
                <div class="daily-challenge-icon">üèÜ</div>
                <div class="daily-challenge-content">
                    <div style="font-size: 16px; font-weight: 700">
                        Daily Challenge
                    </div>
                    <div
                        id="daily-country-name"
                        style="
                            font-weight: 600;
                            font-size: 14px;
                            margin-top: 1px;
                            line-height: 1.2;
                        "
                    ></div>
                </div>
            </div>

            <!-- Canvas -->
            <div id="canvas-container" class="relative inline-block mx-auto my-4">
                <canvas
                    id="canvas"
                    class="absolute top-0 left-1/2 transform -translate-x-1/2 border-4 canvas-element cursor-crosshair rounded-xl"
                >
                </canvas>
            </div>

            <div class="px-8 sm:px-0">
                <!-- Buttons -->
                <div
                    class="relative z-10 my-0 flex justify-center"
                    style="gap: clamp(1rem, 5vw, 3rem)"
                >
                    <button
                    id="left-btn"
                    class="green w-40 px-4 py-2 text-base cursor-pointer primary-button rounded-full transition-colors transition-transform duration-150"
                    >
                    Guess Country
                    </button>

                    <!-- Right Button Group - always w-40 -->
                    <div class="relative flex items-center justify-start w-40 gap-2">
                        <button
                            id="right-btn"
                            class="w-full px-4 py-2 text-base secondary-button rounded-full cursor-pointer transition-all duration-150"
                        >
                            Clear
                        </button>

                        <button
                            id="undo-btn"
                            class="absolute right-0 hidden w-10 h-10 rounded-full secondary-button cursor-pointer transition-all duration-150 flex items-center justify-center"
                        >
                            <img src="static/undo-icon.svg" alt="Undo" class="undo-icon w-5 h-5">
                        </button>
                    </div>
                </div>


                <!-- Message -->
                <p
                    id="message"
                    class="mt-5 text-lg message-text relative z-10 max-w-md mx-auto"
                ></p>
            </div>

            <!-- Confirmation Container -->
            <div id="confirmation-container" class="hidden mt-5 relative z-10">
                <div class="flex items-center justify-center gap-3">
                    <div>
                        <select
                            id="country-dropdown"
                            class="px-4 py-1.5 text-base dropdown-element rounded-full max-w-[18rem]"
                        >
                            {% for country in countries %}
                            <option
                                value="{{ country }}"
                                class="dropdown-element"
                            >
                                {{ country }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="flex items-center justify-center gap-3 mt-3">
                    <span class="text-base">drawn by</span>
                    <input
                        id="author-input"
                        type="text"
                        placeholder="Anonymous"
                        maxlength="20"
                        class="inline-block align-middle text-base author-element rounded-md text-center px-3"
                    />
                </div>
            </div>

            <!-- Leaderboard Button -->
            <div class="fixed bottom-4 left-0 right-0 flex justify-center z-40 translate-y-24 opacity-0" id="leaderboard-container">
                <button
                    id="leaderboard-btn"
                    class="w-52 px-5 py-2.5 text-base whitespace-nowrap cursor-pointer leaderboard-button rounded-full shadow-lg transition-all"
                >
                    Show Leaderboard
                </button>
            </div>

            <!-- Confetti -->
            <div
                id="tsparticles-confetti-container"
                class="fixed inset-0 w-full h-full pointer-events-none z-50"
            ></div>

            <script>
                document.addEventListener("touchstart", function () {}, true);
            </script>
            <script
                type="module"
                {% if is_admin %}
                src="{{ url_for('static', filename='js/admin.js') }}"
                {% else %}
                src="{{ url_for('static', filename='js/main.js') }}"
                {% endif %}
            ></script>
        </div>
    </body>
</html>
